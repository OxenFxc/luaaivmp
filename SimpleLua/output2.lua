local OP_MOVE = 0
local OP_LOADK = 1
local OP_ADD = 2
local OP_SUB = 3
local OP_MUL = 4
local OP_DIV = 5
local OP_MOD = 6
local OP_CONCAT = 7
local OP_LEN = 8
local OP_NOT = 9
local OP_EQ = 10
local OP_LT = 11
local OP_LE = 12
local OP_JMP = 13
local OP_JMP_FALSE = 14
local OP_GETGLOBAL = 15
local OP_SETGLOBAL = 16
local OP_NEWTABLE = 17
local OP_GETTABLE = 18
local OP_SETTABLE = 19
local OP_CALL = 20
local OP_CLOSURE = 21
local OP_GETUPVAL = 22
local OP_SETUPVAL = 23
local OP_VARARG = 24
local OP_FORPREP = 25
local OP_FORLOOP = 26
local OP_PRINT = 27
local OP_RETURN = 28

local main_proto = {
  constants = {
    [0] = 0,
    [1] = 1,
    [2] = 2,
    [3] = 3,
    [4] = 4,
    [5] = 5,
    [6] = 6,
    [7] = 7,
    [8] = 8,
    [9] = 9,
    [10] = 10,
    [11] = 11,
    [12] = 12,
    [13] = 13,
    [14] = 14,
    [15] = 15,
    [16] = 16,
    [17] = 17,
    [18] = 18,
    [19] = 19,
    [20] = 20,
    [21] = 21,
    [22] = 22,
    [23] = 23,
    [24] = 24,
    [25] = 25,
    [26] = 26,
    [27] = 27,
    [28] = 28,
    [29] = 0,
    [30] = 1,
    [31] = 1,
    [32] = 2,
    [33] = 2,
    [34] = "table",
    [35] = 3,
    [36] = "insert",
    [37] = 4,
    [38] = 3,
    [39] = 5,
    [40] = 1,
    [41] = 6,
    [42] = 1,
    [43] = 7,
    [44] = 1,
    [45] = 8,
    [46] = 10,
    [47] = "constants",
    [48] = 21,
    [49] = 1,
    [50] = 1,
    [51] = 2,
    [52] = 0,
    [53] = 3,
    [54] = 0,
    [55] = 4,
    [56] = 1,
    [57] = 0,
    [58] = 1,
    [59] = 0,
    [60] = 2,
    [61] = 1,
    [62] = 3,
    [63] = 0,
    [64] = 4,
    [65] = 2,
    [66] = 17,
    [67] = 1,
    [68] = 1,
    [69] = 2,
    [70] = 0,
    [71] = 3,
    [72] = 0,
    [73] = 4,
    [74] = 3,
    [75] = 0,
    [76] = 1,
    [77] = 2,
    [78] = 2,
    [79] = 1,
    [80] = 3,
    [81] = 0,
    [82] = 4,
    [83] = 4,
    [84] = 1,
    [85] = 1,
    [86] = 1,
    [87] = 2,
    [88] = 0,
    [89] = 3,
    [90] = 0,
    [91] = 4,
    [92] = 5,
    [93] = 1,
    [94] = 1,
    [95] = 3,
    [96] = 2,
    [97] = 1,
    [98] = 3,
    [99] = 0,
    [100] = 4,
    [101] = 6,
    [102] = 19,
    [103] = 1,
    [104] = 2,
    [105] = 2,
    [106] = 1,
    [107] = 3,
    [108] = 3,
    [109] = 4,
    [110] = 7,
    [111] = 15,
    [112] = 1,
    [113] = 1,
    [114] = 2,
    [115] = 2,
    [116] = 3,
    [117] = 0,
    [118] = 4,
    [119] = 8,
    [120] = 1,
    [121] = 1,
    [122] = 3,
    [123] = 2,
    [124] = 3,
    [125] = 3,
    [126] = 0,
    [127] = 4,
    [128] = 9,
    [129] = 18,
    [130] = 1,
    [131] = 4,
    [132] = 2,
    [133] = 1,
    [134] = 3,
    [135] = 3,
    [136] = 4,
    [137] = 10,
    [138] = 1,
    [139] = 1,
    [140] = 5,
    [141] = 2,
    [142] = 4,
    [143] = 3,
    [144] = 0,
    [145] = 4,
    [146] = 11,
    [147] = 0,
    [148] = 1,
    [149] = 5,
    [150] = 2,
    [151] = 2,
    [152] = 3,
    [153] = 0,
    [154] = 4,
    [155] = 12,
    [156] = 0,
    [157] = 1,
    [158] = 6,
    [159] = 2,
    [160] = 5,
    [161] = 3,
    [162] = 0,
    [163] = 4,
    [164] = 13,
    [165] = 20,
    [166] = 1,
    [167] = 4,
    [168] = 2,
    [169] = 3,
    [170] = 3,
    [171] = 1,
    [172] = 4,
    [173] = 14,
    [174] = 17,
    [175] = 1,
    [176] = 1,
    [177] = 2,
    [178] = 0,
    [179] = 3,
    [180] = 0,
    [181] = 4,
    [182] = 15,
    [183] = 0,
    [184] = 1,
    [185] = 3,
    [186] = 2,
    [187] = 1,
    [188] = 3,
    [189] = 0,
    [190] = 4,
    [191] = 16,
    [192] = 1,
    [193] = 1,
    [194] = 1,
    [195] = 2,
    [196] = 5,
    [197] = 3,
    [198] = 0,
    [199] = 4,
    [200] = 17,
    [201] = 17,
    [202] = 1,
    [203] = 4,
    [204] = 2,
    [205] = 0,
    [206] = 3,
    [207] = 0,
    [208] = 4,
    [209] = 18,
    [210] = 19,
    [211] = 1,
    [212] = 3,
    [213] = 2,
    [214] = 1,
    [215] = 3,
    [216] = 4,
    [217] = 4,
    [218] = 19,
    [219] = 1,
    [220] = 1,
    [221] = 1,
    [222] = 2,
    [223] = 6,
    [224] = 3,
    [225] = 0,
    [226] = 4,
    [227] = 20,
    [228] = 18,
    [229] = 1,
    [230] = 4,
    [231] = 2,
    [232] = 3,
    [233] = 3,
    [234] = 1,
    [235] = 4,
    [236] = 21,
    [237] = 1,
    [238] = 1,
    [239] = 5,
    [240] = 2,
    [241] = 7,
    [242] = 3,
    [243] = 0,
    [244] = 4,
    [245] = 22,
    [246] = 1,
    [247] = 1,
    [248] = 6,
    [249] = 2,
    [250] = 8,
    [251] = 3,
    [252] = 0,
    [253] = 4,
    [254] = 23,
    [255] = 19,
    [256] = 1,
    [257] = 4,
    [258] = 2,
    [259] = 5,
    [260] = 3,
    [261] = 6,
    [262] = 4,
    [263] = 24,
    [264] = 28,
    [265] = 1,
    [266] = 0,
    [267] = 2,
    [268] = 0,
    [269] = 3,
    [270] = 0,
    [271] = 4,
    [272] = 25,
    [273] = "code",
    [274] = 0,
    [275] = "constants",
    [276] = 28,
    [277] = 1,
    [278] = 0,
    [279] = 2,
    [280] = 1,
    [281] = 3,
    [282] = 0,
    [283] = 4,
    [284] = 1,
    [285] = "code",
    [286] = "protos",
    [287] = "upvalues",
    [288] = "protos",
    [289] = "upvalues",
    [290] = "_G",
    [291] = "proto",
    [292] = "upvalues",
  },
  code = {
    {1, 0, 0, 0},
    {0, 1, 0, 0},
    {1, 0, 1, 0},
    {0, 2, 0, 0},
    {1, 0, 2, 0},
    {0, 3, 0, 0},
    {1, 0, 3, 0},
    {0, 4, 0, 0},
    {1, 0, 4, 0},
    {0, 5, 0, 0},
    {1, 0, 5, 0},
    {0, 6, 0, 0},
    {1, 0, 6, 0},
    {0, 7, 0, 0},
    {1, 0, 7, 0},
    {0, 8, 0, 0},
    {1, 0, 8, 0},
    {0, 9, 0, 0},
    {1, 0, 9, 0},
    {0, 10, 0, 0},
    {1, 0, 10, 0},
    {0, 11, 0, 0},
    {1, 0, 11, 0},
    {0, 12, 0, 0},
    {1, 0, 12, 0},
    {0, 13, 0, 0},
    {1, 0, 13, 0},
    {0, 14, 0, 0},
    {1, 0, 14, 0},
    {0, 15, 0, 0},
    {1, 0, 15, 0},
    {0, 16, 0, 0},
    {1, 0, 16, 0},
    {0, 17, 0, 0},
    {1, 0, 17, 0},
    {0, 18, 0, 0},
    {1, 0, 18, 0},
    {0, 19, 0, 0},
    {1, 0, 19, 0},
    {0, 20, 0, 0},
    {1, 0, 20, 0},
    {0, 21, 0, 0},
    {1, 0, 21, 0},
    {0, 22, 0, 0},
    {1, 0, 22, 0},
    {0, 23, 0, 0},
    {1, 0, 23, 0},
    {0, 24, 0, 0},
    {1, 0, 24, 0},
    {0, 25, 0, 0},
    {1, 0, 25, 0},
    {0, 26, 0, 0},
    {1, 0, 26, 0},
    {0, 27, 0, 0},
    {1, 0, 27, 0},
    {0, 28, 0, 0},
    {1, 0, 28, 0},
    {0, 29, 0, 0},
    {17, 0, 0, 0},
    {17, 30, 0, 0},
    {1, 31, 29, 0},
    {1, 32, 30, 0},
    {19, 30, 31, 32},
    {1, 31, 31, 0},
    {1, 32, 32, 0},
    {19, 30, 31, 32},
    {1, 31, 33, 0},
    {1, 32, 34, 0},
    {19, 30, 31, 32},
    {1, 31, 35, 0},
    {1, 32, 36, 0},
    {19, 30, 31, 32},
    {1, 31, 37, 0},
    {1, 32, 38, 0},
    {19, 30, 31, 32},
    {1, 31, 39, 0},
    {1, 32, 40, 0},
    {19, 30, 31, 32},
    {1, 31, 41, 0},
    {1, 32, 42, 0},
    {19, 30, 31, 32},
    {1, 31, 43, 0},
    {1, 32, 44, 0},
    {19, 30, 31, 32},
    {1, 31, 45, 0},
    {1, 32, 46, 0},
    {19, 30, 31, 32},
    {1, 33, 47, 0},
    {19, 0, 33, 30},
    {17, 30, 0, 0},
    {17, 31, 0, 0},
    {1, 32, 48, 0},
    {1, 33, 49, 0},
    {19, 31, 33, 32},
    {1, 32, 50, 0},
    {1, 33, 51, 0},
    {19, 31, 33, 32},
    {1, 32, 52, 0},
    {1, 33, 53, 0},
    {19, 31, 33, 32},
    {1, 32, 54, 0},
    {1, 33, 55, 0},
    {19, 31, 33, 32},
    {1, 34, 56, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 57, 0},
    {1, 33, 58, 0},
    {19, 31, 33, 32},
    {1, 32, 59, 0},
    {1, 33, 60, 0},
    {19, 31, 33, 32},
    {1, 32, 61, 0},
    {1, 33, 62, 0},
    {19, 31, 33, 32},
    {1, 32, 63, 0},
    {1, 33, 64, 0},
    {19, 31, 33, 32},
    {1, 34, 65, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 66, 0},
    {1, 33, 67, 0},
    {19, 31, 33, 32},
    {1, 32, 68, 0},
    {1, 33, 69, 0},
    {19, 31, 33, 32},
    {1, 32, 70, 0},
    {1, 33, 71, 0},
    {19, 31, 33, 32},
    {1, 32, 72, 0},
    {1, 33, 73, 0},
    {19, 31, 33, 32},
    {1, 34, 74, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 75, 0},
    {1, 33, 76, 0},
    {19, 31, 33, 32},
    {1, 32, 77, 0},
    {1, 33, 78, 0},
    {19, 31, 33, 32},
    {1, 32, 79, 0},
    {1, 33, 80, 0},
    {19, 31, 33, 32},
    {1, 32, 81, 0},
    {1, 33, 82, 0},
    {19, 31, 33, 32},
    {1, 34, 83, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 84, 0},
    {1, 33, 85, 0},
    {19, 31, 33, 32},
    {1, 32, 86, 0},
    {1, 33, 87, 0},
    {19, 31, 33, 32},
    {1, 32, 88, 0},
    {1, 33, 89, 0},
    {19, 31, 33, 32},
    {1, 32, 90, 0},
    {1, 33, 91, 0},
    {19, 31, 33, 32},
    {1, 34, 92, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 93, 0},
    {1, 33, 94, 0},
    {19, 31, 33, 32},
    {1, 32, 95, 0},
    {1, 33, 96, 0},
    {19, 31, 33, 32},
    {1, 32, 97, 0},
    {1, 33, 98, 0},
    {19, 31, 33, 32},
    {1, 32, 99, 0},
    {1, 33, 100, 0},
    {19, 31, 33, 32},
    {1, 34, 101, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 102, 0},
    {1, 33, 103, 0},
    {19, 31, 33, 32},
    {1, 32, 104, 0},
    {1, 33, 105, 0},
    {19, 31, 33, 32},
    {1, 32, 106, 0},
    {1, 33, 107, 0},
    {19, 31, 33, 32},
    {1, 32, 108, 0},
    {1, 33, 109, 0},
    {19, 31, 33, 32},
    {1, 34, 110, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 111, 0},
    {1, 33, 112, 0},
    {19, 31, 33, 32},
    {1, 32, 113, 0},
    {1, 33, 114, 0},
    {19, 31, 33, 32},
    {1, 32, 115, 0},
    {1, 33, 116, 0},
    {19, 31, 33, 32},
    {1, 32, 117, 0},
    {1, 33, 118, 0},
    {19, 31, 33, 32},
    {1, 34, 119, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 120, 0},
    {1, 33, 121, 0},
    {19, 31, 33, 32},
    {1, 32, 122, 0},
    {1, 33, 123, 0},
    {19, 31, 33, 32},
    {1, 32, 124, 0},
    {1, 33, 125, 0},
    {19, 31, 33, 32},
    {1, 32, 126, 0},
    {1, 33, 127, 0},
    {19, 31, 33, 32},
    {1, 34, 128, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 129, 0},
    {1, 33, 130, 0},
    {19, 31, 33, 32},
    {1, 32, 131, 0},
    {1, 33, 132, 0},
    {19, 31, 33, 32},
    {1, 32, 133, 0},
    {1, 33, 134, 0},
    {19, 31, 33, 32},
    {1, 32, 135, 0},
    {1, 33, 136, 0},
    {19, 31, 33, 32},
    {1, 34, 137, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 138, 0},
    {1, 33, 139, 0},
    {19, 31, 33, 32},
    {1, 32, 140, 0},
    {1, 33, 141, 0},
    {19, 31, 33, 32},
    {1, 32, 142, 0},
    {1, 33, 143, 0},
    {19, 31, 33, 32},
    {1, 32, 144, 0},
    {1, 33, 145, 0},
    {19, 31, 33, 32},
    {1, 34, 146, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 147, 0},
    {1, 33, 148, 0},
    {19, 31, 33, 32},
    {1, 32, 149, 0},
    {1, 33, 150, 0},
    {19, 31, 33, 32},
    {1, 32, 151, 0},
    {1, 33, 152, 0},
    {19, 31, 33, 32},
    {1, 32, 153, 0},
    {1, 33, 154, 0},
    {19, 31, 33, 32},
    {1, 34, 155, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 156, 0},
    {1, 33, 157, 0},
    {19, 31, 33, 32},
    {1, 32, 158, 0},
    {1, 33, 159, 0},
    {19, 31, 33, 32},
    {1, 32, 160, 0},
    {1, 33, 161, 0},
    {19, 31, 33, 32},
    {1, 32, 162, 0},
    {1, 33, 163, 0},
    {19, 31, 33, 32},
    {1, 34, 164, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 165, 0},
    {1, 33, 166, 0},
    {19, 31, 33, 32},
    {1, 32, 167, 0},
    {1, 33, 168, 0},
    {19, 31, 33, 32},
    {1, 32, 169, 0},
    {1, 33, 170, 0},
    {19, 31, 33, 32},
    {1, 32, 171, 0},
    {1, 33, 172, 0},
    {19, 31, 33, 32},
    {1, 34, 173, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 174, 0},
    {1, 33, 175, 0},
    {19, 31, 33, 32},
    {1, 32, 176, 0},
    {1, 33, 177, 0},
    {19, 31, 33, 32},
    {1, 32, 178, 0},
    {1, 33, 179, 0},
    {19, 31, 33, 32},
    {1, 32, 180, 0},
    {1, 33, 181, 0},
    {19, 31, 33, 32},
    {1, 34, 182, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 183, 0},
    {1, 33, 184, 0},
    {19, 31, 33, 32},
    {1, 32, 185, 0},
    {1, 33, 186, 0},
    {19, 31, 33, 32},
    {1, 32, 187, 0},
    {1, 33, 188, 0},
    {19, 31, 33, 32},
    {1, 32, 189, 0},
    {1, 33, 190, 0},
    {19, 31, 33, 32},
    {1, 34, 191, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 192, 0},
    {1, 33, 193, 0},
    {19, 31, 33, 32},
    {1, 32, 194, 0},
    {1, 33, 195, 0},
    {19, 31, 33, 32},
    {1, 32, 196, 0},
    {1, 33, 197, 0},
    {19, 31, 33, 32},
    {1, 32, 198, 0},
    {1, 33, 199, 0},
    {19, 31, 33, 32},
    {1, 34, 200, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 201, 0},
    {1, 33, 202, 0},
    {19, 31, 33, 32},
    {1, 32, 203, 0},
    {1, 33, 204, 0},
    {19, 31, 33, 32},
    {1, 32, 205, 0},
    {1, 33, 206, 0},
    {19, 31, 33, 32},
    {1, 32, 207, 0},
    {1, 33, 208, 0},
    {19, 31, 33, 32},
    {1, 34, 209, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 210, 0},
    {1, 33, 211, 0},
    {19, 31, 33, 32},
    {1, 32, 212, 0},
    {1, 33, 213, 0},
    {19, 31, 33, 32},
    {1, 32, 214, 0},
    {1, 33, 215, 0},
    {19, 31, 33, 32},
    {1, 32, 216, 0},
    {1, 33, 217, 0},
    {19, 31, 33, 32},
    {1, 34, 218, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 219, 0},
    {1, 33, 220, 0},
    {19, 31, 33, 32},
    {1, 32, 221, 0},
    {1, 33, 222, 0},
    {19, 31, 33, 32},
    {1, 32, 223, 0},
    {1, 33, 224, 0},
    {19, 31, 33, 32},
    {1, 32, 225, 0},
    {1, 33, 226, 0},
    {19, 31, 33, 32},
    {1, 34, 227, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 228, 0},
    {1, 33, 229, 0},
    {19, 31, 33, 32},
    {1, 32, 230, 0},
    {1, 33, 231, 0},
    {19, 31, 33, 32},
    {1, 32, 232, 0},
    {1, 33, 233, 0},
    {19, 31, 33, 32},
    {1, 32, 234, 0},
    {1, 33, 235, 0},
    {19, 31, 33, 32},
    {1, 34, 236, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 237, 0},
    {1, 33, 238, 0},
    {19, 31, 33, 32},
    {1, 32, 239, 0},
    {1, 33, 240, 0},
    {19, 31, 33, 32},
    {1, 32, 241, 0},
    {1, 33, 242, 0},
    {19, 31, 33, 32},
    {1, 32, 243, 0},
    {1, 33, 244, 0},
    {19, 31, 33, 32},
    {1, 34, 245, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 246, 0},
    {1, 33, 247, 0},
    {19, 31, 33, 32},
    {1, 32, 248, 0},
    {1, 33, 249, 0},
    {19, 31, 33, 32},
    {1, 32, 250, 0},
    {1, 33, 251, 0},
    {19, 31, 33, 32},
    {1, 32, 252, 0},
    {1, 33, 253, 0},
    {19, 31, 33, 32},
    {1, 34, 254, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 255, 0},
    {1, 33, 256, 0},
    {19, 31, 33, 32},
    {1, 32, 257, 0},
    {1, 33, 258, 0},
    {19, 31, 33, 32},
    {1, 32, 259, 0},
    {1, 33, 260, 0},
    {19, 31, 33, 32},
    {1, 32, 261, 0},
    {1, 33, 262, 0},
    {19, 31, 33, 32},
    {1, 34, 263, 0},
    {19, 30, 34, 31},
    {17, 31, 0, 0},
    {1, 32, 264, 0},
    {1, 33, 265, 0},
    {19, 31, 33, 32},
    {1, 32, 266, 0},
    {1, 33, 267, 0},
    {19, 31, 33, 32},
    {1, 32, 268, 0},
    {1, 33, 269, 0},
    {19, 31, 33, 32},
    {1, 32, 270, 0},
    {1, 33, 271, 0},
    {19, 31, 33, 32},
    {1, 34, 272, 0},
    {19, 30, 34, 31},
    {1, 35, 273, 0},
    {19, 0, 35, 30},
    {17, 30, 0, 0},
    {1, 31, 274, 0},
    {17, 32, 0, 0},
    {17, 33, 0, 0},
    {1, 34, 275, 0},
    {19, 32, 34, 33},
    {17, 33, 0, 0},
    {17, 34, 0, 0},
    {1, 35, 276, 0},
    {1, 36, 277, 0},
    {19, 34, 36, 35},
    {1, 35, 278, 0},
    {1, 36, 279, 0},
    {19, 34, 36, 35},
    {1, 35, 280, 0},
    {1, 36, 281, 0},
    {19, 34, 36, 35},
    {1, 35, 282, 0},
    {1, 36, 283, 0},
    {19, 34, 36, 35},
    {1, 37, 284, 0},
    {19, 33, 37, 34},
    {1, 38, 285, 0},
    {19, 32, 38, 33},
    {17, 33, 0, 0},
    {1, 34, 286, 0},
    {19, 32, 34, 33},
    {17, 33, 0, 0},
    {1, 34, 287, 0},
    {19, 32, 34, 33},
    {19, 30, 31, 32},
    {1, 35, 288, 0},
    {19, 0, 35, 30},
    {17, 30, 0, 0},
    {1, 31, 289, 0},
    {19, 0, 31, 30},
    {0, 32, 0, 0},
    {15, 0, 290, 0},
    {0, 30, 0, 0},
    {21, 31, 0, 0},
    {0, 0, 31, 0},
    {17, 31, 0, 0},
    {1, 33, 291, 0},
    {19, 31, 33, 32},
    {17, 33, 0, 0},
    {1, 34, 292, 0},
    {19, 31, 34, 33},
    {17, 35, 0, 0},
    {0, 1, 31, 0},
    {0, 2, 35, 0},
    {20, 0, 3, 1},
    {28, 0, 0, 0},
  },
  protos = {
    [0] = {
  constants = {
    [0] = "proto",
    [1] = 1,
    [2] = 1,
    [3] = 1,
    [4] = 1,
    [5] = "code",
    [6] = "constants",
    [7] = "protos",
    [8] = "upvalues",
    [9] = 1,
    [10] = 1,
    [11] = 2,
    [12] = 3,
    [13] = 4,
    [14] = "val",
    [15] = "val",
    [16] = "val",
    [17] = "val",
    [18] = "val",
    [19] = "val",
    [20] = "val",
    [21] = "val",
    [22] = "val",
    [23] = "val",
    [24] = "val",
    [25] = "val",
    [26] = "val",
    [27] = "val",
    [28] = "val",
    [29] = nil,
    [30] = "error",
    [31] = "OP_GETTABLE: stack[",
    [32] = "] is nil. Key: ",
    [33] = "tostring",
    [34] = "val",
    [35] = nil,
    [36] = "error",
    [37] = "OP_SETTABLE: stack[",
    [38] = "] is nil. Key: ",
    [39] = "tostring",
    [40] = "val",
    [41] = "val",
    [42] = "val",
    [43] = 1,
    [44] = 0,
    [45] = 1,
    [46] = 1,
    [47] = 1,
    [48] = "val",
    [49] = 2,
    [50] = 2,
    [51] = 1,
    [52] = 0,
    [53] = 0,
    [54] = 3,
    [55] = 0,
    [56] = "upvalues",
    [57] = "upvalues",
    [58] = 1,
    [59] = "upvalues",
    [60] = 0,
    [61] = 1,
    [62] = 1,
    [63] = "upvalues",
    [64] = "isLocal",
    [65] = "index",
    [66] = "val",
    [67] = "index",
    [68] = "proto",
    [69] = "upvalues",
    [70] = "closure",
    [71] = "type",
    [72] = "val",
    [73] = 1,
    [74] = 1,
    [75] = 1,
    [76] = "type",
    [77] = "table",
    [78] = "type",
    [79] = "closure",
    [80] = "proto",
    [81] = "numParams",
    [82] = 0,
    [83] = 1,
    [84] = 1,
    [85] = "table",
    [86] = "insert",
    [87] = "table",
    [88] = "insert",
    [89] = 1,
    [90] = 0,
    [91] = "val",
    [92] = "type",
    [93] = "function",
    [94] = "table",
    [95] = "unpack",
    [96] = 1,
    [97] = 1,
    [98] = 0,
    [99] = 1,
    [100] = 1,
    [101] = 1,
    [102] = "val",
    [103] = 0,
    [104] = 1,
    [105] = 1,
    [106] = 1,
    [107] = "val",
    [108] = "getmetatable",
    [109] = "__call",
    [110] = 1,
    [111] = 1,
    [112] = 1,
    [113] = "table",
    [114] = "insert",
    [115] = "__call",
    [116] = "table",
    [117] = "unpack",
    [118] = 1,
    [119] = 0,
    [120] = "val",
    [121] = "error",
    [122] = "Attempt to call non-function",
    [123] = 2,
    [124] = "error",
    [125] = "Unknown opcode: ",
  },
  code = {
    {1, 3, 0, 0},
    {18, 4, 0, 3},
    {0, 5, 4, 0},
    {17, 3, 0, 0},
    {0, 4, 3, 0},
    {17, 3, 0, 0},
    {0, 6, 3, 0},
    {14, 1, 13, 0},
    {1, 3, 1, 0},
    {8, 7, 1, 0},
    {1, 8, 2, 0},
    {0, 9, 3, 0},
    {0, 10, 7, 0},
    {0, 11, 8, 0},
    {25, 9, 4, 0},
    {1, 13, 3, 0},
    {3, 14, 12, 13},
    {18, 15, 1, 12},
    {19, 4, 14, 15},
    {26, 9, -5, 0},
    {13, 0, 0, 0},
    {0, 3, 2, 0},
    {9, 7, 3, 0},
    {14, 7, 2, 0},
    {17, 8, 0, 0},
    {0, 3, 8, 0},
    {0, 9, 3, 0},
    {1, 3, 4, 0},
    {0, 7, 3, 0},
    {1, 3, 5, 0},
    {18, 8, 5, 3},
    {0, 10, 8, 0},
    {1, 3, 6, 0},
    {18, 8, 5, 3},
    {0, 11, 8, 0},
    {1, 3, 7, 0},
    {18, 8, 5, 3},
    {0, 12, 8, 0},
    {1, 3, 8, 0},
    {18, 8, 0, 3},
    {0, 13, 8, 0},
    {9, 14, 13, 0},
    {14, 14, 2, 0},
    {17, 15, 0, 0},
    {0, 13, 15, 0},
    {0, 16, 13, 0},
    {8, 3, 10, 0},
    {12, 8, 7, 3},
    {14, 8, 743, 0},
    {18, 13, 10, 7},
    {0, 14, 13, 0},
    {1, 3, 9, 0},
    {2, 8, 7, 3},
    {0, 7, 8, 0},
    {1, 3, 10, 0},
    {18, 8, 14, 3},
    {0, 13, 8, 0},
    {1, 3, 11, 0},
    {18, 8, 14, 3},
    {0, 15, 8, 0},
    {1, 3, 12, 0},
    {18, 8, 14, 3},
    {0, 17, 8, 0},
    {1, 3, 13, 0},
    {18, 8, 14, 3},
    {0, 18, 8, 0},
    {22, 3, 0, 0},
    {10, 8, 13, 3},
    {14, 8, 10, 0},
    {18, 19, 4, 17},
    {19, 4, 15, 19},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 14, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 712, 0},
    {22, 3, 1, 0},
    {10, 8, 13, 3},
    {14, 8, 10, 0},
    {18, 19, 11, 17},
    {19, 4, 15, 19},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 15, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 699, 0},
    {22, 3, 2, 0},
    {10, 8, 13, 3},
    {14, 8, 12, 0},
    {18, 19, 4, 17},
    {18, 20, 4, 18},
    {2, 21, 19, 20},
    {19, 4, 15, 21},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 16, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 684, 0},
    {22, 3, 3, 0},
    {10, 8, 13, 3},
    {14, 8, 12, 0},
    {18, 19, 4, 17},
    {18, 20, 4, 18},
    {3, 21, 19, 20},
    {19, 4, 15, 21},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 17, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 669, 0},
    {22, 3, 4, 0},
    {10, 8, 13, 3},
    {14, 8, 12, 0},
    {18, 19, 4, 17},
    {18, 20, 4, 18},
    {4, 21, 19, 20},
    {19, 4, 15, 21},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 18, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 654, 0},
    {22, 3, 5, 0},
    {10, 8, 13, 3},
    {14, 8, 12, 0},
    {18, 19, 4, 17},
    {18, 20, 4, 18},
    {5, 21, 19, 20},
    {19, 4, 15, 21},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 19, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 639, 0},
    {22, 3, 6, 0},
    {10, 8, 13, 3},
    {14, 8, 12, 0},
    {18, 19, 4, 17},
    {18, 20, 4, 18},
    {6, 21, 19, 20},
    {19, 4, 15, 21},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 20, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 624, 0},
    {22, 3, 7, 0},
    {10, 8, 13, 3},
    {14, 8, 12, 0},
    {18, 19, 4, 17},
    {18, 20, 4, 18},
    {7, 21, 19, 20},
    {19, 4, 15, 21},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 21, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 609, 0},
    {22, 3, 8, 0},
    {10, 8, 13, 3},
    {14, 8, 11, 0},
    {18, 19, 4, 17},
    {8, 20, 19, 0},
    {19, 4, 15, 20},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 22, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 595, 0},
    {22, 3, 9, 0},
    {10, 8, 13, 3},
    {14, 8, 11, 0},
    {18, 19, 4, 17},
    {9, 20, 19, 0},
    {19, 4, 15, 20},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 23, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 581, 0},
    {22, 3, 10, 0},
    {10, 8, 13, 3},
    {14, 8, 12, 0},
    {18, 19, 4, 17},
    {18, 20, 4, 18},
    {10, 21, 19, 20},
    {19, 4, 15, 21},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 24, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 566, 0},
    {22, 3, 11, 0},
    {10, 8, 13, 3},
    {14, 8, 12, 0},
    {18, 19, 4, 17},
    {18, 20, 4, 18},
    {11, 21, 19, 20},
    {19, 4, 15, 21},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 25, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 551, 0},
    {22, 3, 12, 0},
    {10, 8, 13, 3},
    {14, 8, 12, 0},
    {18, 19, 4, 17},
    {18, 20, 4, 18},
    {12, 21, 19, 20},
    {19, 4, 15, 21},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 26, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 536, 0},
    {22, 3, 13, 0},
    {10, 8, 13, 3},
    {14, 8, 3, 0},
    {2, 19, 7, 17},
    {0, 7, 19, 0},
    {13, 0, 530, 0},
    {22, 3, 14, 0},
    {10, 8, 13, 3},
    {14, 8, 7, 0},
    {18, 19, 4, 15},
    {9, 20, 19, 0},
    {14, 20, 3, 0},
    {2, 21, 7, 17},
    {0, 7, 21, 0},
    {13, 0, 0, 0},
    {13, 0, 520, 0},
    {22, 3, 15, 0},
    {10, 8, 13, 3},
    {14, 8, 12, 0},
    {22, 19, 16, 0},
    {18, 20, 11, 17},
    {18, 21, 19, 20},
    {19, 4, 15, 21},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 27, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 505, 0},
    {22, 3, 17, 0},
    {10, 8, 13, 3},
    {14, 8, 5, 0},
    {22, 19, 16, 0},
    {18, 20, 11, 17},
    {18, 21, 4, 15},
    {19, 19, 20, 21},
    {13, 0, 497, 0},
    {22, 3, 18, 0},
    {10, 8, 13, 3},
    {14, 8, 10, 0},
    {17, 19, 0, 0},
    {19, 4, 15, 19},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 28, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 484, 0},
    {22, 3, 19, 0},
    {10, 8, 13, 3},
    {14, 8, 29, 0},
    {18, 19, 4, 17},
    {1, 20, 29, 0},
    {10, 21, 19, 20},
    {14, 21, 13, 0},
    {15, 22, 30, 0},
    {1, 23, 31, 0},
    {1, 24, 32, 0},
    {15, 25, 33, 0},
    {18, 26, 4, 18},
    {0, 26, 26, 0},
    {20, 25, 2, 2},
    {7, 27, 24, 25},
    {7, 28, 17, 27},
    {7, 29, 23, 28},
    {0, 23, 29, 0},
    {20, 22, 2, 1},
    {13, 0, 0, 0},
    {18, 3, 4, 17},
    {18, 8, 4, 18},
    {18, 19, 3, 8},
    {19, 4, 15, 19},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 34, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 452, 0},
    {22, 3, 20, 0},
    {10, 8, 13, 3},
    {14, 8, 22, 0},
    {18, 19, 4, 15},
    {1, 20, 35, 0},
    {10, 21, 19, 20},
    {14, 21, 13, 0},
    {15, 22, 36, 0},
    {1, 23, 37, 0},
    {1, 24, 38, 0},
    {15, 25, 39, 0},
    {18, 26, 4, 17},
    {0, 26, 26, 0},
    {20, 25, 2, 2},
    {7, 27, 24, 25},
    {7, 28, 15, 27},
    {7, 29, 23, 28},
    {0, 23, 29, 0},
    {20, 22, 2, 1},
    {13, 0, 0, 0},
    {18, 3, 4, 15},
    {18, 8, 4, 17},
    {18, 19, 4, 18},
    {19, 3, 8, 19},
    {13, 0, 427, 0},
    {22, 3, 21, 0},
    {10, 8, 13, 3},
    {14, 8, 12, 0},
    {18, 19, 16, 17},
    {1, 20, 40, 0},
    {18, 21, 19, 20},
    {19, 4, 15, 21},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 41, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 412, 0},
    {22, 3, 22, 0},
    {10, 8, 13, 3},
    {14, 8, 5, 0},
    {18, 19, 16, 17},
    {18, 20, 4, 15},
    {1, 21, 42, 0},
    {19, 19, 21, 20},
    {13, 0, 404, 0},
    {22, 3, 23, 0},
    {10, 8, 13, 3},
    {14, 8, 29, 0},
    {1, 19, 43, 0},
    {3, 20, 18, 19},
    {0, 21, 20, 0},
    {1, 3, 44, 0},
    {11, 8, 21, 3},
    {14, 8, 3, 0},
    {8, 19, 9, 0},
    {0, 21, 19, 0},
    {13, 0, 0, 0},
    {1, 3, 45, 0},
    {1, 8, 46, 0},
    {0, 19, 3, 0},
    {0, 20, 21, 0},
    {0, 21, 8, 0},
    {25, 19, 5, 0},
    {2, 24, 15, 23},
    {1, 25, 47, 0},
    {3, 26, 24, 25},
    {18, 27, 9, 23},
    {19, 4, 26, 27},
    {26, 19, -6, 0},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 8, 6, 15},
    {18, 19, 4, 15},
    {1, 20, 48, 0},
    {19, 8, 20, 19},
    {13, 0, 0, 0},
    {13, 0, 372, 0},
    {22, 3, 24, 0},
    {10, 8, 13, 3},
    {14, 8, 9, 0},
    {18, 19, 4, 15},
    {1, 20, 49, 0},
    {2, 21, 15, 20},
    {18, 22, 4, 21},
    {3, 23, 19, 22},
    {19, 4, 15, 23},
    {2, 3, 7, 17},
    {0, 7, 3, 0},
    {13, 0, 360, 0},
    {22, 3, 25, 0},
    {10, 8, 13, 3},
    {14, 8, 37, 0},
    {1, 19, 50, 0},
    {2, 20, 15, 19},
    {18, 21, 4, 20},
    {0, 22, 21, 0},
    {18, 3, 4, 15},
    {2, 8, 3, 22},
    {19, 4, 15, 8},
    {18, 3, 4, 15},
    {0, 8, 3, 0},
    {1, 3, 51, 0},
    {2, 19, 15, 3},
    {18, 20, 4, 19},
    {0, 21, 20, 0},
    {1, 3, 52, 0},
    {11, 19, 3, 22},
    {0, 20, 19, 0},
    {14, 20, 2, 0},
    {12, 23, 8, 21},
    {0, 20, 23, 0},
    {0, 24, 20, 0},
    {9, 25, 24, 0},
    {14, 25, 7, 0},
    {1, 26, 53, 0},
    {12, 27, 22, 26},
    {0, 28, 27, 0},
    {14, 28, 2, 0},
    {12, 29, 21, 8},
    {0, 28, 29, 0},
    {0, 24, 28, 0},
    {14, 24, 6, 0},
    {2, 30, 7, 17},
    {0, 7, 30, 0},
    {1, 3, 54, 0},
    {2, 19, 15, 3},
    {19, 4, 19, 8},
    {13, 0, 0, 0},
    {13, 0, 320, 0},
    {22, 3, 26, 0},
    {10, 8, 13, 3},
    {14, 8, 73, 0},
    {18, 19, 12, 17},
    {0, 20, 19, 0},
    {1, 3, 55, 0},
    {0, 8, 3, 0},
    {1, 3, 56, 0},
    {18, 19, 20, 3},
    {14, 19, 7, 0},
    {1, 21, 57, 0},
    {18, 22, 20, 21},
    {8, 23, 22, 0},
    {1, 24, 58, 0},
    {2, 25, 23, 24},
    {0, 8, 25, 0},
    {13, 0, 0, 0},
    {17, 3, 0, 0},
    {0, 19, 3, 0},
    {1, 3, 59, 0},
    {18, 21, 20, 3},
    {14, 21, 37, 0},
    {1, 22, 60, 0},
    {1, 23, 61, 0},
    {3, 24, 8, 23},
    {1, 25, 62, 0},
    {0, 26, 22, 0},
    {0, 27, 24, 0},
    {0, 28, 25, 0},
    {25, 26, 27, 0},
    {1, 30, 63, 0},
    {18, 31, 20, 30},
    {18, 32, 31, 29},
    {0, 33, 32, 0},
    {1, 3, 64, 0},
    {18, 21, 33, 3},
    {14, 21, 16, 0},
    {1, 22, 65, 0},
    {18, 23, 33, 22},
    {0, 24, 23, 0},
    {18, 3, 6, 24},
    {14, 3, 3, 0},
    {18, 21, 6, 24},
    {19, 19, 29, 21},
    {13, 0, 7, 0},
    {17, 3, 0, 0},
    {18, 21, 4, 24},
    {1, 22, 66, 0},
    {19, 3, 22, 21},
    {0, 23, 3, 0},
    {19, 6, 24, 23},
    {19, 19, 29, 23},
    {13, 0, 4, 0},
    {1, 3, 67, 0},
    {18, 21, 33, 3},
    {18, 22, 16, 21},
    {19, 19, 29, 22},
    {26, 26, -28, 0},
    {13, 0, 0, 0},
    {17, 3, 0, 0},
    {1, 21, 68, 0},
    {19, 3, 21, 20},
    {1, 21, 69, 0},
    {19, 3, 21, 19},
    {1, 21, 70, 0},
    {1, 22, 71, 0},
    {19, 3, 22, 21},
    {19, 4, 15, 3},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 21, 6, 15},
    {18, 22, 4, 15},
    {1, 23, 72, 0},
    {19, 21, 23, 22},
    {13, 0, 0, 0},
    {13, 0, 244, 0},
    {22, 3, 27, 0},
    {10, 8, 13, 3},
    {14, 8, 219, 0},
    {18, 19, 4, 15},
    {0, 20, 19, 0},
    {17, 3, 0, 0},
    {0, 8, 3, 0},
    {1, 3, 73, 0},
    {3, 19, 17, 3},
    {0, 21, 19, 0},
    {1, 3, 74, 0},
    {1, 19, 75, 0},
    {0, 22, 3, 0},
    {0, 23, 21, 0},
    {0, 24, 19, 0},
    {25, 22, 3, 0},
    {2, 26, 15, 25},
    {18, 27, 4, 26},
    {19, 8, 25, 27},
    {26, 22, -4, 0},
    {15, 3, 76, 0},
    {0, 4, 20, 0},
    {20, 3, 2, 2},
    {1, 19, 77, 0},
    {10, 22, 3, 19},
    {0, 23, 22, 0},
    {14, 23, 5, 0},
    {1, 24, 78, 0},
    {18, 25, 20, 24},
    {1, 26, 79, 0},
    {10, 27, 25, 26},
    {0, 23, 27, 0},
    {14, 23, 61, 0},
    {1, 28, 80, 0},
    {18, 29, 20, 28},
    {1, 30, 81, 0},
    {18, 31, 29, 30},
    {0, 32, 31, 0},
    {9, 33, 32, 0},
    {14, 33, 2, 0},
    {1, 34, 82, 0},
    {0, 32, 34, 0},
    {0, 35, 32, 0},
    {17, 3, 0, 0},
    {0, 19, 3, 0},
    {17, 3, 0, 0},
    {0, 22, 3, 0},
    {1, 3, 83, 0},
    {8, 23, 8, 0},
    {1, 24, 84, 0},
    {0, 25, 3, 0},
    {0, 26, 23, 0},
    {0, 27, 24, 0},
    {25, 25, 17, 0},
    {12, 29, 28, 35},
    {14, 29, 8, 0},
    {15, 30, 85, 0},
    {1, 31, 86, 0},
    {18, 32, 30, 31},
    {18, 33, 8, 28},
    {0, 33, 19, 0},
    {0, 34, 33, 0},
    {20, 32, 3, 1},
    {13, 0, 7, 0},
    {15, 3, 87, 0},
    {1, 23, 88, 0},
    {18, 24, 3, 23},
    {18, 29, 8, 28},
    {0, 25, 22, 0},
    {0, 26, 29, 0},
    {20, 24, 3, 1},
    {26, 25, -18, 0},
    {22, 3, 28, 0},
    {0, 4, 20, 0},
    {0, 5, 19, 0},
    {0, 6, 22, 0},
    {20, 3, 4, 2},
    {0, 23, 3, 0},
    {1, 3, 89, 0},
    {3, 24, 18, 3},
    {0, 25, 24, 0},
    {1, 3, 90, 0},
    {11, 24, 3, 25},
    {14, 24, 9, 0},
    {19, 4, 15, 23},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 24, 6, 15},
    {18, 26, 4, 15},
    {1, 27, 91, 0},
    {19, 24, 27, 26},
    {13, 0, 0, 0},
    {13, 0, 0, 0},
    {13, 0, 127, 0},
    {15, 3, 92, 0},
    {0, 4, 20, 0},
    {20, 3, 2, 2},
    {1, 19, 93, 0},
    {10, 22, 3, 19},
    {14, 22, 62, 0},
    {17, 23, 0, 0},
    {15, 24, 94, 0},
    {1, 25, 95, 0},
    {18, 26, 24, 25},
    {0, 27, 8, 0},
    {20, 26, 2, 2},
    {0, 21, 26, 0},
    {20, 20, 2, 2},
    {1, 27, 96, 0},
    {19, 23, 27, 20},
    {0, 28, 23, 0},
    {1, 3, 97, 0},
    {3, 19, 18, 3},
    {0, 22, 19, 0},
    {1, 3, 98, 0},
    {11, 19, 3, 22},
    {14, 19, 20, 0},
    {1, 23, 99, 0},
    {1, 24, 100, 0},
    {0, 25, 23, 0},
    {0, 26, 22, 0},
    {0, 27, 24, 0},
    {25, 25, 5, 0},
    {2, 30, 15, 29},
    {1, 31, 101, 0},
    {3, 32, 30, 31},
    {18, 33, 28, 29},
    {19, 4, 32, 33},
    {26, 25, -6, 0},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 19, 6, 15},
    {18, 23, 4, 15},
    {1, 24, 102, 0},
    {19, 19, 24, 23},
    {13, 0, 0, 0},
    {13, 0, 24, 0},
    {1, 3, 103, 0},
    {11, 19, 22, 3},
    {14, 19, 21, 0},
    {1, 23, 104, 0},
    {8, 24, 28, 0},
    {1, 25, 105, 0},
    {0, 26, 23, 0},
    {0, 27, 24, 0},
    {0, 28, 25, 0},
    {25, 26, 5, 0},
    {2, 31, 15, 30},
    {1, 32, 106, 0},
    {3, 33, 31, 32},
    {18, 34, 28, 30},
    {19, 4, 33, 34},
    {26, 26, -6, 0},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 19, 6, 15},
    {18, 23, 4, 15},
    {1, 24, 107, 0},
    {19, 19, 24, 23},
    {13, 0, 0, 0},
    {13, 0, 0, 0},
    {13, 0, 59, 0},
    {15, 3, 108, 0},
    {0, 4, 20, 0},
    {20, 3, 2, 2},
    {0, 19, 3, 0},
    {0, 3, 19, 0},
    {14, 3, 3, 0},
    {1, 22, 109, 0},
    {18, 23, 19, 22},
    {0, 3, 23, 0},
    {14, 3, 45, 0},
    {17, 24, 0, 0},
    {1, 25, 110, 0},
    {19, 24, 25, 20},
    {0, 26, 24, 0},
    {1, 3, 111, 0},
    {8, 22, 8, 0},
    {1, 23, 112, 0},
    {0, 24, 3, 0},
    {0, 25, 22, 0},
    {0, 26, 23, 0},
    {25, 24, 8, 0},
    {18, 29, 8, 28},
    {0, 30, 29, 0},
    {15, 3, 113, 0},
    {1, 22, 114, 0},
    {18, 23, 3, 22},
    {0, 24, 26, 0},
    {0, 25, 30, 0},
    {20, 23, 3, 1},
    {26, 24, -9, 0},
    {1, 3, 115, 0},
    {18, 22, 19, 3},
    {15, 23, 116, 0},
    {1, 24, 117, 0},
    {18, 25, 23, 24},
    {0, 26, 26, 0},
    {20, 25, 2, 2},
    {0, 23, 25, 0},
    {20, 22, 2, 2},
    {0, 27, 22, 0},
    {1, 3, 118, 0},
    {3, 22, 18, 3},
    {1, 23, 119, 0},
    {11, 24, 23, 22},
    {14, 24, 9, 0},
    {19, 4, 15, 27},
    {18, 3, 6, 15},
    {14, 3, 5, 0},
    {18, 22, 6, 15},
    {18, 23, 4, 15},
    {1, 24, 120, 0},
    {19, 22, 24, 23},
    {13, 0, 0, 0},
    {13, 0, 0, 0},
    {13, 0, 4, 0},
    {15, 3, 121, 0},
    {1, 22, 122, 0},
    {0, 4, 22, 0},
    {20, 3, 2, 1},
    {13, 0, 22, 0},
    {22, 3, 29, 0},
    {10, 8, 13, 3},
    {14, 8, 3, 0},
    {18, 19, 4, 15},
    {27, 19, 0, 0},
    {13, 0, 16, 0},
    {22, 3, 30, 0},
    {10, 8, 13, 3},
    {14, 8, 8, 0},
    {1, 19, 123, 0},
    {10, 20, 17, 19},
    {14, 20, 3, 0},
    {18, 21, 4, 15},
    {28, 21, 2, 0},
    {13, 0, 0, 0},
    {28, 0, 1, 0},
    {13, 0, 5, 0},
    {15, 3, 124, 0},
    {1, 8, 125, 0},
    {7, 19, 8, 13},
    {0, 4, 19, 0},
    {20, 3, 2, 1},
    {13, 0, -746, 0},
    {28, 0, 1, 0},
  },
  protos = {
  },
  upvalues = {
    [0] = { isLocal = true, index = 1 },
    [1] = { isLocal = true, index = 2 },
    [2] = { isLocal = true, index = 3 },
    [3] = { isLocal = true, index = 4 },
    [4] = { isLocal = true, index = 5 },
    [5] = { isLocal = true, index = 6 },
    [6] = { isLocal = true, index = 7 },
    [7] = { isLocal = true, index = 8 },
    [8] = { isLocal = true, index = 9 },
    [9] = { isLocal = true, index = 10 },
    [10] = { isLocal = true, index = 11 },
    [11] = { isLocal = true, index = 12 },
    [12] = { isLocal = true, index = 13 },
    [13] = { isLocal = true, index = 14 },
    [14] = { isLocal = true, index = 15 },
    [15] = { isLocal = true, index = 16 },
    [16] = { isLocal = true, index = 30 },
    [17] = { isLocal = true, index = 17 },
    [18] = { isLocal = true, index = 18 },
    [19] = { isLocal = true, index = 19 },
    [20] = { isLocal = true, index = 20 },
    [21] = { isLocal = true, index = 23 },
    [22] = { isLocal = true, index = 24 },
    [23] = { isLocal = true, index = 25 },
    [24] = { isLocal = true, index = 26 },
    [25] = { isLocal = true, index = 27 },
    [26] = { isLocal = true, index = 22 },
    [27] = { isLocal = true, index = 21 },
    [28] = { isLocal = true, index = 0 },
    [29] = { isLocal = true, index = 28 },
    [30] = { isLocal = true, index = 29 },
  }
},
  },
  upvalues = {
  }
}

local _G = _G -- Global environment

local function run_vm(closure, args, varargs)
    local proto = closure.proto
    local stack = {}

    -- Open upvalues: map from stack index to upvalue box
    local open_upvalues = {}

    -- Initialize args
    if args then
        for i = 1, #args do
            stack[i-1] = args[i]
        end
    end

    local vargs = varargs or {}

    local pc = 1
    local code = proto.code
    local constants = proto.constants
    local protos = proto.protos
    local upvalues = closure.upvalues or {}

    while pc <= #code do
        local inst = code[pc]
        pc = pc + 1

        local op = inst[1]
        local a = inst[2]
        local b = inst[3]
        local c = inst[4]

        if op == OP_MOVE then
            stack[a] = stack[b]
            -- If 'a' has an open upvalue, update it
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_LOADK then
            stack[a] = constants[b]
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_ADD then
            stack[a] = stack[b] + stack[c]
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_SUB then
            stack[a] = stack[b] - stack[c]
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_MUL then
            stack[a] = stack[b] * stack[c]
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_DIV then
            stack[a] = stack[b] / stack[c]
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_MOD then
            stack[a] = stack[b] % stack[c]
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_CONCAT then
            stack[a] = stack[b] .. stack[c]
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_LEN then
            stack[a] = #stack[b]
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_NOT then
            stack[a] = not stack[b]
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_EQ then
            stack[a] = (stack[b] == stack[c])
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_LT then
            stack[a] = (stack[b] < stack[c])
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_LE then
            stack[a] = (stack[b] <= stack[c])
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_JMP then
            pc = pc + b
        elseif op == OP_JMP_FALSE then
            if not stack[a] then
                pc = pc + b
            end
        elseif op == OP_GETGLOBAL then
            stack[a] = _G[constants[b]]
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_SETGLOBAL then
            _G[constants[b]] = stack[a]
        elseif op == OP_NEWTABLE then
            stack[a] = {}
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_GETTABLE then
            if stack[b] == nil then
                error("OP_GETTABLE: stack[" .. b .. "] is nil. Key: " .. tostring(stack[c]))
            end
            stack[a] = stack[b][stack[c]]
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_SETTABLE then
            if stack[a] == nil then
                error("OP_SETTABLE: stack[" .. a .. "] is nil. Key: " .. tostring(stack[b]))
            end
            stack[a][stack[b]] = stack[c]
        elseif op == OP_GETUPVAL then
            stack[a] = upvalues[b].val
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_SETUPVAL then
            upvalues[b].val = stack[a]
        elseif op == OP_VARARG then
            -- R(A) ... R(A+C-2) = varargs
            local n = c - 1
            if n < 0 then n = #vargs end -- All varargs? B=0.
            -- Using C to determine how many
            -- If C=2, we want 1.
            for i = 1, n do
                stack[a + i - 1] = vargs[i]
            end
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end
        elseif op == OP_FORPREP then
            stack[a] = stack[a] - stack[a+2]
            pc = pc + b
        elseif op == OP_FORLOOP then
            local step = stack[a+2]
            stack[a] = stack[a] + step
            local idx = stack[a]
            local limit = stack[a+1]
            if (step > 0 and idx <= limit) or (step <= 0 and idx >= limit) then
                pc = pc + b
                stack[a+3] = idx
            end
        elseif op == OP_CLOSURE then
            local p = protos[b]
            -- Check if upvalues exist (might be nil if no upvalues)
            local nups = 0
            if p.upvalues then nups = #p.upvalues + 1 end

            local new_ups = {}
            if p.upvalues then
                for i=0, nups-1 do
                    local info = p.upvalues[i]
                    if info.isLocal then
                        local idx = info.index
                        if open_upvalues[idx] then
                            new_ups[i] = open_upvalues[idx]
                        else
                            local uv = { val = stack[idx] }
                            open_upvalues[idx] = uv
                            new_ups[i] = uv
                        end
                    else
                        new_ups[i] = upvalues[info.index]
                    end
                end
            end
            stack[a] = { proto = p, upvalues = new_ups, type = "closure" }
            if open_upvalues[a] then open_upvalues[a].val = stack[a] end

        elseif op == OP_CALL then
            local func = stack[a]
            local callArgs = {}
            local numArgs = b - 1
            for i = 1, numArgs do
                callArgs[i] = stack[a + i]
            end

            if type(func) == "table" and func.type == "closure" then
                -- Need to separate fixed args and varargs?
                -- SimpleLua doesn't distinguish well in call site unless we change OP_CALL.
                -- For now, all extra args are just args.
                -- But VM needs to split them for params vs varargs.
                local fixedParams = func.proto.numParams or 0
                local fArgs = {}
                local vArgs = {}
                for i = 1, #callArgs do
                    if i <= fixedParams then
                        table.insert(fArgs, callArgs[i])
                    else
                        table.insert(vArgs, callArgs[i])
                    end
                end

                local results = run_vm(func, fArgs, vArgs)
                local numResults = c - 1
                if numResults > 0 then
                   stack[a] = results
                   if open_upvalues[a] then open_upvalues[a].val = stack[a] end
                end
            elseif type(func) == "function" then
                 local results = { func(table.unpack(callArgs)) }
                 local numResults = c - 1
                 if numResults > 0 then
                     for i = 1, numResults do
                         stack[a + i - 1] = results[i]
                     end
                     if open_upvalues[a] then open_upvalues[a].val = stack[a] end
                 elseif numResults < 0 then
                     for i = 1, #results do
                         stack[a + i - 1] = results[i]
                     end
                     if open_upvalues[a] then open_upvalues[a].val = stack[a] end
                 end
            else
                -- Try __call metamethod
                local mt = getmetatable(func)
                if mt and mt.__call then
                    -- call mt.__call(func, ...)
                    local metaArgs = {func}
                    for i = 1, #callArgs do
                        local arg = callArgs[i]
                        table.insert(metaArgs, arg)
                    end
                    local res = mt.__call(table.unpack(metaArgs))
                     if c - 1 > 0 then
                         stack[a] = res
                         if open_upvalues[a] then open_upvalues[a].val = stack[a] end
                     end
                else
                    error("Attempt to call non-function")
                end
            end

        elseif op == OP_PRINT then
            print(stack[a])
        elseif op == OP_RETURN then
            -- Close upvalues?
            -- Since we used tables {val=...} for upvalues, and passed them by reference to children,
            -- we don't need to do explicit closing logic unless we want to detach them from stack.
            -- But stack is gone anyway.
            if b == 2 then
                return stack[a]
            end
            return
        else
            error("Unknown opcode: " .. op)
        end
    end
end

-- Run main chunk
run_vm({ proto = main_proto, upvalues = {} }, {})
