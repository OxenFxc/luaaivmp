# SimpleLua Compiler

SimpleLua is a lightweight Lua compiler written in C++17. It compiles a subset of Lua source code into a custom bytecode format, which is then executed by a provided Lua virtual machine script (`output.lua`). This project demonstrates the implementation of a compiler pipeline including lexing, parsing, code generation, and a virtual machine execution model.

## Features

*   **Modern C++ Codebase**: Built using C++17 standards.
*   **Custom Bytecode Generation**: Compiles Lua source to a custom bytecode format.
*   **Virtual Machine**: Includes a Lua-based VM to execute the generated bytecode.
*   **Control Structures**: Supports `if`, `elseif`, `else`, `while`, and generic `for` loops.
*   **Functions**: Supports local functions, nested functions, and closures.
*   **Table Operations**: Supports table creation, indexing, and manipulation.
*   **Cross-Platform**: Designed to work on Linux, Windows, and Android (via NDK).

## Prerequisites

To build and run SimpleLua, you need:

*   A C++17 compatible compiler (e.g., `g++` 7.0 or later).
*   GNU Make.
*   Lua 5.3 (to run the generated bytecode VM).

## Building

1.  Clone the repository:
    ```bash
    git clone https://github.com/yourusername/SimpleLua.git
    cd SimpleLua
    ```

2.  Navigate to the `SimpleLua` directory and build the project using `make`:
    ```bash
    cd SimpleLua
    make
    ```

    This will generate the `simple_lua` executable.

## Usage

To compile a Lua script:

```bash
./simple_lua <input_file.lua> <output_file.lua>
```

*   `<input_file.lua>`: The path to your Lua source file.
*   `<output_file.lua>`: The path where the generated Lua VM script will be saved (e.g., `output.lua`).

### Running the Compiled Code

The output file is a valid Lua 5.3 script that contains both the VM implementation and your compiled bytecode. Run it using the Lua interpreter:

```bash
lua5.3 output.lua
```

### Example

Create a file named `test.lua`:

```lua
local function factorial(n)
    if n == 0 then
        return 1
    else
        return n * factorial(n - 1)
    end
end

print(factorial(5))
```

Compile and run it:

```bash
./simple_lua test.lua output.lua
lua5.3 output.lua
```

Output:
```
120
```

## Project Structure

*   `SimpleLua/src/`: Source code for the compiler (Lexer, Parser, CodeGen).
*   `SimpleLua/Makefile`: Build configuration.
*   `LICENSE`: MIT License.
*   `CONTRIBUTING.md`: Contribution guidelines.
*   `CODE_OF_CONDUCT.md`: Community standards.

## Contributing

Contributions are welcome! Please read [CONTRIBUTING.md](CONTRIBUTING.md) for details on our code of conduct, and the process for submitting pull requests.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.
